(this["webpackJsonpslack-clone"]=this["webpackJsonpslack-clone"]||[]).push([[0],{191:function(e,t,n){},196:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(61),s=n.n(r),i=n(80),l=(n(191),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,243)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))}),o=(n(192),n(32)),u=n(25),j=n(241),d=(n(196),n(236)),b=n(229),O=n(225),h=n(213),f=n(8),p=function(){return Object(f.jsxs)(d.a,{as:b.a,icon:"labeled",inverted:!0,vertical:!0,visible:!0,width:"very thin",children:[Object(f.jsx)(O.a,{}),Object(f.jsx)(h.a,{icon:"add",size:"small",color:"yellow"})]})},g=n(18),m=n(239),x=n(231),v=n(31),C=n(226),A=n(235),S=n(149),P=(n(201),n(212),n(211),Object({NODE_ENV:"production",PUBLIC_URL:"/slack-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH_DOMAIN:"react-slack-8f754.firebaseapp.com",REACT_APP_APIKEY:"AIzaSyC2C-A0_ds-Q-MNcMpz58o94znF-_vb7u8",REACT_APP_PROJECT_ID:"react-slack-8f754",REACT_APP_APP_ID:"1:1029738739899:web:075c764b0d96953491519e",REACT_APP_REALTIME_DB:"https://react-slack-8f754-default-rtdb.asia-southeast1.firebasedatabase.app",REACT_APP_MESSAGING_SENDER_ID:"1029738739899",REACT_APP_STORAGE_BUCKATE:"react-slack-8f754.appspot.com"})),_={apiKey:P.REACT_APP_APIKEY,authDomain:P.REACT_APP_AUTH_DOMAIN,projectId:P.REACT_APP_PROJECT_ID,storageBucket:P.REACT_APP_STORAGE_BUCKATE,messagingSenderId:P.REACT_APP_MESSAGING_SENDER_ID,appId:P.REACT_APP_APP_ID,databaseURL:P.REACT_APP_REALTIME_DB};console.log("Firebase Config: ",_),S.a.initializeApp(_);var y=S.a.database(),E=S.a,k=n(232),R=n(154),T=n.n(R),I=function(e){var t=e.open,n=e.closeModal,c=e.uploadFile,r=Object(a.useState)(),s=Object(g.a)(r,2),i=s[0],l=s[1],o=Object(a.useState)(["image/jpeg","image/png"]),u=Object(g.a)(o,2),j=u[0],d=(u[1],function(){return l(null)}),b=function(e){var t=T.a.lookup(e);return j.includes(t)};return Object(f.jsxs)(k.a,{open:t,onClose:n,children:[Object(f.jsx)(k.a.Header,{children:"Select Image"}),Object(f.jsx)(k.a.Content,{children:Object(f.jsx)(C.a,{fluid:!0,onChange:function(e){var t=null===e||void 0===e?void 0:e.target.files[0];t&&l(t)},label:"File Type: jpg, png",name:"file",type:"file"})}),Object(f.jsxs)(k.a.Actions,{children:[Object(f.jsx)(h.a,{color:"black",onClick:n,children:"Cancel"}),Object(f.jsx)(h.a,{content:"Upload Image",labelPosition:"right",icon:"checkmark",onClick:function(){if(null!==i&&b(i.name)){var e={contentType:T.a.lookup(i.name)};c(i,e),n(),d()}},positive:!0})]})]})},N=n(233),w=function(e){var t=e.percentUploaded,n=e.className;return Object(f.jsx)(N.a,{className:n,percent:t,indicating:!0,progress:!0,success:!0})},U=function(e){var t=e.messageRef,n=Object(a.useState)(""),c=Object(g.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(!1),l=Object(g.a)(i,2),u=l[0],j=l[1],d=Object(a.useState)(!1),b=Object(g.a)(d,2),O=b[0],p=b[1],x=Object(a.useState)([]),S=Object(g.a)(x,2),P=S[0],_=S[1],y=Object(a.useState)(""),k=Object(g.a)(y,2),R=k[0],T=k[1],N=Object(a.useState)(null),U=Object(g.a)(N,2),D=U[0],L=U[1],M=Object(a.useState)(E.storage().ref()),F=Object(g.a)(M,2),B=F[0],z=(F[1],Object(a.useState)(0)),K=Object(g.a)(z,2),H=K[0],W=K[1],G=Object(o.c)((function(e){return e.user})).currentUser,J=Object(o.c)((function(e){return e.channel})).currentChannel,V=function(e){var t={timestamp:E.database.ServerValue.TIMESTAMP,user:{id:G.uid,name:G.displayName,avatar:G.photoURL}};return e?t.image=e:t.content=r,t};Object(a.useEffect)((function(){if(D)return D.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);W(t)}),(function(e){_([].concat(Object(v.a)(P),[e])),T("error"),L(null)}),(function(){D.snapshot.ref.getDownloadURL().then((function(e){Y(e)})).catch((function(e){_([].concat(Object(v.a)(P),[e])),T("error"),L(null)}))})),function(){D.off()}}),[D]);var Y=function(e){t.child(J.id).push().set(V(e)).then((function(){T("done")})).catch((function(e){_([].concat(Object(v.a)(P),[e]))}))};return Object(f.jsxs)(m.a,{className:"message-form",children:[Object(f.jsx)(h.a,{floated:"left",icon:"cloud upload",onClick:function(){return j(!0)}}),Object(f.jsx)(C.a,{fluid:!0,floated:"right",name:"message",style:{marginBottom:"0.7em"},label:Object(f.jsx)(h.a,{icon:"send",disabled:O,loading:O,onClick:function(){r?(p(!0),t.child(J.id).push().set(V()).then((function(){p(!1),s("")})).catch((function(e){console.log(e),p(!1),_([].concat(Object(v.a)(P),[e]))}))):_([].concat(Object(v.a)(P),[{message:"Type Message"}]))}}),labelPosition:"right",value:r,className:P.some((function(e){return e.message.includes("message")}))?"error":"",onChange:function(e){return s(e.target.value)},placeholder:"type your message"}),Object(f.jsx)(I,{open:u,closeModal:function(){return j(!1)},uploadFile:function(e,t){J.id;var n="chat/public/".concat(Object(A.a)(),".jpg");T("uploading"),L(B.child(n).put(e,t))}}),"uploading"===R&&Object(f.jsx)(w,{className:"progress_bar",percentUploaded:H})]})},D=n(240),L=n(85),M=function(e){var t=e.channelName,n=e.users;return Object(f.jsxs)(m.a,{clearing:!0,children:[Object(f.jsxs)(D.a,{fluid:"true",as:"h2",floated:"left",style:{marginBottom:0},children:[Object(f.jsxs)("span",{children:[t,Object(f.jsx)(L.a,{name:"star outline",color:"black"})]}),Object(f.jsxs)(D.a.Subheader,{children:[n," Users"]})]}),Object(f.jsx)(D.a,{floated:"right",children:Object(f.jsx)(C.a,{size:"mini",icon:"search",name:"searchTerm",placeholder:"Search Messages"})})]})},F=n(170),B=n.n(F),z=n(175),K=function(e){e.key;var t,n=e.message,a=e.user;return Object(f.jsxs)(x.a,{children:[Object(f.jsx)(x.a.Avatar,{src:n.user.avatar}),Object(f.jsxs)(x.a.Content,{className:function(e,t){return e.user.id===t.uid?"message_self":""}(n,a),children:[Object(f.jsx)(x.a.Author,{as:"a",children:n.user.name}),Object(f.jsx)(x.a.Metadata,{children:(t=n.timestamp,B()(t).fromNow())}),function(e){return e.hasOwnProperty("image")&&!e.hasOwnProperty("content")}(n)?Object(f.jsx)(z.a,{src:n.image,className:"message_image"}):Object(f.jsx)(x.a.Text,{children:n.content})]})]})},H=function(){var e=Object(a.useState)(E.database().ref("messages")),t=Object(g.a)(e,2),n=t[0],c=(t[1],Object(a.useState)([])),r=Object(g.a)(c,2),s=r[0],i=r[1],l=Object(a.useState)(0),u=Object(g.a)(l,2),j=u[0],d=u[1],b=Object(o.c)((function(e){return e.user})).currentUser,O=Object(o.c)((function(e){return e.channel})).currentChannel;Object(a.useEffect)((function(){O&&h(null===O||void 0===O?void 0:O.id)}),[O]);var h=function(e){var t=[];n.child(e).on("child_added",(function(e){t.push(e.val()),i(t)})),p(t)},p=function(e){var t=e.reduce((function(e,t){return e.includes(t.user.name)||e.push(t.user.name),e}),[]);d(t.length)};return Object(f.jsxs)("div",{className:"message-box",children:[Object(f.jsx)(M,{channelName:null===O||void 0===O?void 0:O.name,users:j}),Object(f.jsx)(m.a,{children:Object(f.jsx)(x.a.Group,{className:"comment-box",children:function(e){return e.map((function(e){return Object(f.jsx)(K,{message:e,user:b},e.timestamp)}))}(s)})}),Object(f.jsx)(U,{messageRef:n})]})},W=function(){return Object(f.jsx)("div",{children:"MetaPanel"})},G=n(230),J="SET_USER",V="CLEAR_USER",Y="SET_CURRENT_CHANNEL",q=function(){var e=Object(a.useState)([]),t=Object(g.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(g.a)(r,2),i=s[0],l=s[1],u=Object(a.useState)(""),j=Object(g.a)(u,2),d=j[0],O=j[1],p=Object(a.useState)(""),m=Object(g.a)(p,2),x=m[0],v=m[1],A=Object(a.useState)(E.database().ref("channels")),S=Object(g.a)(A,2),P=S[0],_=(S[1],Object(o.b)()),y=Object(o.c)((function(e){return e.user})),R=Object(o.c)((function(e){return e.channel})),T=y.currentUser,I=R.currentChannel;Object(a.useEffect)((function(){return N(),function(){P.off()}}),[]);var N=function(){var e=[];P.on("child_added",(function(t){e.push(t.val()),c(e)}))},w=function(e,t){return e&&t},U=function(e){_(function(e){return{type:Y,payload:{currentChannel:e}}}(e))};return Object(f.jsxs)("div",{children:[Object(f.jsxs)(b.a.Menu,{style:{paddingBottom:"2em"},children:[Object(f.jsxs)(b.a.Item,{children:[Object(f.jsxs)("span",{children:[Object(f.jsx)(L.a,{name:"exchange"})," Channels"]})," ","( ",n.length," )"," ",Object(f.jsx)(L.a,{name:"add",onClick:function(){return l(!0)}})]}),n.map((function(e){return Object(f.jsxs)(b.a.Item,{onClick:function(){return U(e)},name:e.name,style:{opacity:.7},active:(null===e||void 0===e?void 0:e.id)===(null===I||void 0===I?void 0:I.id),children:["# ",e.name]},e.key)}))]}),Object(f.jsxs)(k.a,{open:i,onClose:function(){return l(!1)},onOpen:function(){return l(!0)},children:[Object(f.jsx)(k.a.Header,{children:"Create New Channel"}),Object(f.jsx)(k.a.Content,{children:Object(f.jsxs)(G.a,{children:[Object(f.jsxs)(G.a.Field,{children:[Object(f.jsx)("label",{children:"Channel Name"}),Object(f.jsx)(C.a,{fluid:!0,placeholder:"Knowledge Base",name:"channelName",onChange:function(e){O(e.target.value)}})]}),Object(f.jsxs)(G.a.Field,{children:[Object(f.jsx)("label",{children:"Channel Description"}),Object(f.jsx)(C.a,{fluid:!0,placeholder:"In this channel you share the important blogs, videos and other resources",name:"channelDescription",onChange:function(e){v(e.target.value)}})]})]})}),Object(f.jsxs)(k.a.Actions,{children:[Object(f.jsx)(h.a,{color:"black",onClick:function(){return l(!1)},children:"Cancel"}),Object(f.jsx)(h.a,{content:"Add Channel",labelPosition:"right",icon:"checkmark",onClick:function(e){e.preventDefault(),w(d,x)&&function(){var e=P.push().key,t={id:e,name:d,description:x,createdBy:{name:T.displayName,avatar:T.photoURL}};P.child(e).update(t).then((function(){O(""),v(""),l(!1)})).catch((function(e){console.log(e)}))}()},positive:!0})]})]})]})},Q=n(228),X=function(){var e=Object(a.useState)(),t=Object(g.a)(e,2),n=t[0],c=t[1],r=Object(o.c)((function(e){return e.user})).currentUser,s=function(){E.auth().signOut().then((function(){return console.log("User Signed Out")}))};return Object(a.useEffect)((function(){c(r)}),[r]),Object(f.jsxs)("div",{children:[Object(f.jsx)(j.a,{style:{background:"#000"},children:Object(f.jsx)(j.a.Column,{children:Object(f.jsx)(j.a.Row,{style:{padding:"1.2rem",margin:"0"},children:Object(f.jsxs)(D.a,{inverted:!0,floated:"left",as:"h2",children:[Object(f.jsx)(L.a,{name:"slack"}),Object(f.jsx)(D.a.Content,{children:"SlackClone"})]})})})}),Object(f.jsx)(j.a,{children:Object(f.jsx)(j.a.Column,{children:Object(f.jsx)(j.a.Row,{style:{padding:"0 1.2rem",margin:"0"},children:Object(f.jsx)(D.a,{style:{padding:"0.25em"},as:"h4",inverted:!0,children:Object(f.jsx)(Q.a,{trigger:Object(f.jsxs)("span",{children:[Object(f.jsx)(z.a,{src:n&&n.photoURL,spaced:"right",avatar:!0}),n&&n.displayName]}),options:[{key:"user",text:Object(f.jsxs)("span",{children:["Signed in as ",Object(f.jsx)("strong",{children:n&&n.displayName})]}),disabled:!0},{key:"avatar",text:Object(f.jsx)("span",{children:"Change Avatar"})},{key:"signout",text:Object(f.jsx)("span",{onClick:s,children:"Sign Out"})}]})})})})})]})},Z=function(){return Object(f.jsxs)(b.a,{size:"large",inverted:!0,fixed:"left",vertical:!0,style:{background:"#016DBF",fontSize:"1.2rem"},children:[Object(f.jsx)(X,{}),Object(f.jsx)(q,{})]})},$=function(){return Object(f.jsxs)(j.a,{columns:"equal",className:"app",style:{background:"#eee"},children:[Object(f.jsx)(p,{}),Object(f.jsx)(Z,{}),Object(f.jsx)(j.a.Column,{style:{marginLeft:320},children:Object(f.jsx)(H,{})}),Object(f.jsx)(j.a.Column,{width:4,children:Object(f.jsx)(W,{})})]})},ee=n(1),te=n.n(ee),ne=n(4),ae=n(234),ce=function(){var e=Object(a.useState)(""),t=Object(g.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(g.a)(r,2),l=s[0],o=s[1],u=Object(a.useState)([]),d=Object(g.a)(u,2),b=d[0],O=d[1],p=Object(a.useState)(!1),x=Object(g.a)(p,2),v=x[0],C=x[1],A=function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S()){e.next=3;break}return e.abrupt("return");case 3:return t.preventDefault(),O([]),C(!0),e.next=8,E.auth().signInWithEmailAndPassword(n,l);case 8:e.sent,C(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Error:",e.t0.message),O([{message:"Email or Password Incorrect"}]),C(!1);case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){return!P()||(O([].concat({message:"Fill In All Fields"})),!1)},P=function(){return!n.length||!l.length};return Object(f.jsx)(j.a,{textAlign:"center",verticalAlign:"middle",className:"app",children:Object(f.jsxs)(j.a.Column,{style:{maxWidth:450},children:[Object(f.jsxs)(D.a,{as:"h1",icon:!0,color:"purple",textAlign:"center",children:[Object(f.jsx)(L.a,{name:"slack",color:"purple"}),"Login On Slack-Clone"]}),Object(f.jsx)(G.a,{size:"large",children:Object(f.jsxs)(m.a,{stacked:!0,children:[Object(f.jsx)(G.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email",value:n,onChange:function(e){return c(e.target.value)},type:"email"}),Object(f.jsx)(G.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",value:l,onChange:function(e){return o(e.target.value)},type:"password"}),Object(f.jsx)(h.a,{className:v?"loading":"",disabled:v,color:"green",fluid:!0,size:"large",onClick:A,children:"Login"})]})}),b.length>0&&Object(f.jsxs)(ae.a,{error:!0,children:[Object(f.jsx)("h3",{children:"Error"}),function(e){return e.map((function(e,t){return Object(f.jsx)("p",{children:e.message},t)}))}(b)]}),Object(f.jsxs)(ae.a,{children:["Already have an account? ",Object(f.jsx)(i.b,{to:"/register",children:" Register"})]})]})})},re=n(172),se=n.n(re),ie=function(){var e=Object(a.useState)(""),t=Object(g.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(g.a)(r,2),l=s[0],o=s[1],u=Object(a.useState)(""),d=Object(g.a)(u,2),b=d[0],O=d[1],p=Object(a.useState)(""),x=Object(g.a)(p,2),v=x[0],C=x[1],A=Object(a.useState)([]),S=Object(g.a)(A,2),P=S[0],_=S[1],k=Object(a.useState)(!1),R=Object(g.a)(k,2),T=R[0],I=R[1],N=function(){var e=Object(ne.a)(te.a.mark((function e(t){var a,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,U()){e.next=3;break}return e.abrupt("return");case 3:return t.preventDefault(),_([]),I(!0),e.next=8,E.auth().createUserWithEmailAndPassword(l,b);case 8:return c=e.sent,console.log(c),e.next=12,null===(a=c.user)||void 0===a?void 0:a.updateProfile({displayName:n,photoURL:"https://www.gravatar.com/avatar/".concat(se()(c.user.email),"?d=identicon")});case 12:return e.sent,e.next=15,w(c);case 15:e.sent,console.log("User Saved"),I(!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),_(P.concat(e.t0.message)),I(!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){if(e.user)return y.ref("users").child(e.user.uid).set({name:e.user.displayName,avatar:e.user.photoURL,email:e.user.email})},U=function(){var e,t=[];return M()?(e={message:"Fill In All Fields"},_(t.concat(e)),!1):!!F()||(e={message:"Password is Invalid"},_(t.concat(e)),!1)},M=function(){return!n.length||!l.length||!b.length||!v.length},F=function(){return!(b.length<6)&&b===v};return Object(f.jsx)(j.a,{textAlign:"center",verticalAlign:"middle",className:"app",children:Object(f.jsxs)(j.a.Column,{style:{maxWidth:450},children:[Object(f.jsxs)(D.a,{as:"h1",icon:!0,color:"green",textAlign:"center",children:[Object(f.jsx)(L.a,{name:"connectdevelop",color:"green"}),"Register On Slack-Clone"]}),Object(f.jsx)(G.a,{size:"large",children:Object(f.jsxs)(m.a,{stacked:!0,children:[Object(f.jsx)(G.a.Input,{fluid:!0,name:"username",icon:"user",iconPosition:"left",placeholder:"Username",value:n,onChange:function(e){return c(e.target.value)},type:"text"}),Object(f.jsx)(G.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email",value:l,onChange:function(e){return o(e.target.value)},type:"email"}),Object(f.jsx)(G.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",value:b,onChange:function(e){return O(e.target.value)},type:"password"}),Object(f.jsx)(G.a.Input,{fluid:!0,name:"confirmPassword",icon:"repeat",iconPosition:"left",placeholder:"Confirm Password",value:v,onChange:function(e){return C(e.target.value)},type:"password"}),Object(f.jsx)(h.a,{className:T?"loading":"",disabled:T,color:"blue",fluid:!0,size:"large",onClick:N,children:"Register"})]})}),P.length>0&&Object(f.jsxs)(ae.a,{error:!0,children:[Object(f.jsx)("h3",{children:"Error"}),function(e){return e.map((function(e,t){return Object(f.jsx)("p",{children:e.message},t)}))}(P)]}),Object(f.jsxs)(ae.a,{children:["Already a User? ",Object(f.jsx)(i.b,{to:"/login",children:"Login"})]})]})})},le=n(238),oe=n(227),ue=function(){return Object(f.jsx)(le.a,{active:!0,children:Object(f.jsx)(oe.a,{size:"huge",content:"Slack-clone is loading"})})};var je=function(){var e=Object(u.f)(),t=Object(o.b)(),n=Object(o.c)((function(e){return e.user})).loading;return Object(a.useEffect)((function(){E.auth().onAuthStateChanged((function(n){n?(t(function(e){return{type:J,payload:{currentUser:e}}}(n)),e.push("/")):(t({type:V}),e.push("/login"))}))}),[]),n?Object(f.jsx)(ue,{}):Object(f.jsxs)(u.c,{children:[Object(f.jsx)(u.a,{exact:!0,path:"/",component:$}),Object(f.jsx)(u.a,{path:"/login",component:ce}),Object(f.jsx)(u.a,{path:"/register",component:ie})]})},de=n(141),be=n(173),Oe=n(86),he={currentUser:null,loading:!0,error:!1},fe={currentChannel:null},pe=Object(de.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(Oe.a)(Object(Oe.a)({},e),{},{currentUser:t.payload.currentUser,loading:!1});case V:return Object(Oe.a)(Object(Oe.a)({},e),{},{currentUser:null,loading:!1});default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(Oe.a)(Object(Oe.a)({},e),{},{currentChannel:t.payload.currentChannel});default:return e}}}),ge=Object(de.createStore)(pe,Object(be.composeWithDevTools)());s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(o.a,{store:ge,children:Object(f.jsx)(i.a,{basename:"/slack-clone",children:Object(f.jsx)(je,{})})})}),document.getElementById("root")),l()}},[[210,1,2]]]);
//# sourceMappingURL=main.4c1e09c0.chunk.js.map